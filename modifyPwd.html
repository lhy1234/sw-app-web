<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>找回密码</title>
<link rel="stylesheet" type="text/css" href="css/hui.css" />
</head>
<body style="background:#F4F5F6;">
<header class="hui-header">
    <div id="hui-back"></div>
    <h1>找回密码</h1>
</header>
<div class="hui-wrap">
    <div class="hui-center-title" style="margin-top:35px;"><h1 style="border:0px;">找回密码</h1></div>
    <div style="margin:20px 10px; margin-bottom:15px;" class="hui-form" id="modifyPwdForm">
        <div class="hui-form-items">
        	<div class="hui-form-items-title">手机号</div>
            <input id="mobileInp" type="text" class="hui-input hui-input-clear" placeholder="请输入手机号" checkType="phone" checkData="11," checkMsg="请输入正确的手机号" />
        </div>
        <div class="hui-form-items">
            <div class="hui-form-items-title">验证码</div>
            <input id="codeInp" type="text" class="hui-input" name="yzm" value="" checkType="reg" checkData="^\d{4,4}$" checkMsg="验证码应该为4个数字" />
            <div style="width:250px;">
            	<button id="sendCodeBtn" type="button" class="hui-button hui-button-small hui-primary hui-fl">发送验证码</button>
            </div>
        </div>
        <div class="hui-form-items">
        	<div class="hui-form-items-title">新密码</div>
            <input id="pwd" type="password" class="hui-input hui-pwd-eye" placeholder="6~16位 英文数字" checkType="string"  checkData="6,16" checkMsg="密码应为6-20个字符" />
        </div>
        <div class="hui-form-items">
        	<div class="hui-form-items-title">确认密码</div>
            <input type="password" class="hui-input hui-pwd-eye" placeholder="6~16位 英文数字" checkType="sameWithId" checkData="pwd" checkMsg="两次密码不一致"  />
        </div>
       
    <div style="padding:10px; padding-top:10px;">
        <button type="button" class="hui-button hui-button-large hui-primary" id="modifySubmitBtn">确定</button>
    </div>
</div>
<script type="text/javascript" src="js/hui.js" charset="UTF-8"></script>
<script type="text/javascript" src="js/hui-form.js" charset="utf-8"></script>
<script type="text/javascript">
	
	//发送短信验证码
	hui('#sendCodeBtn').click(function(){
		var mobile = hui('#mobileInp').val();
		var mobileReg = /^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/;
		if(mobileReg.test(mobile)){
			hui.toast('验证码已发送至：'+mobile);
			/*hui.post(
			    'http://hoa.hcoder.net/index.php',
			    {mobile:mobile},
			    function(msg){
			        console.log(msg);
			        hui.upToast(msg);
			    },
			    function(e){
			        hui.iconToast('读取消息失败', 'warn');
			    }
			);*/
		}else{
			hui.toast('请输入正确的手机号');
		}
		
	});
	//提交注册按钮
	hui('#modifySubmitBtn').click(function(){
		    //验证
		    var res = huiFormCheck('#modifyPwdForm');
		    //提交
		    if(res){
		    	//
		    	var mobileInp = hui('#mobileInp').val();
		    	var codeInp = hui('#codeInp').val();
		    	var pwdInp = hui('#pwd').val();
		    	//hui.toast(mobileInp+" "+ codeInp+' '+pwdInp)
		    	/*hui.post(
				    'http://hoa.hcoder.net/index.php',
				    {name:'hcoder', age:18},
				    function(msg){
				        console.log(msg);
				        hui.upToast(msg);
				    },
				    function(e){
				        hui.iconToast('读取消息失败', 'warn');
				    }
				);*/
		    	hui.alert('修改密码成功！','去登录',function(){
		    		hui.open('login.html', {}, true, {}); 
		    	});
		    	
		    	
		    }
	});
	
	
	
	hui.ready(function(){
    hui.plusReady(function(){
    	
    	
    	
    	
    	
    });
	});

</script>
</body>
</html>